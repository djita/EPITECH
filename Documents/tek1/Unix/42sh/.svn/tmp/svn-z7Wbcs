##
## Makefile for 42sh in /home/falck_m/Work/42sh
##
## Made by mickael falck
## Login   <falck_m@epitech.net>
##
## Started on  Sun Apr 15 15:12:57 2012 mickael falck
## Last update Thu Apr 26 16:59:45 2012 lyoma guillou
##

# Das Makefile v2.0 by falck_m

NAME	=	HIsh
DEBUG	=	no

CC	:=	$(if $(filter yes, $(DEBUG)),clang,gcc)
RM	=	rm -f
SRCDIR	=	./src

ifeq ($(wildcard $(SRCDIR)/testmain.c),)
  SRC	=	$(SRCDIR)/main.c
else
  SRC	=	$(SRCDIR)/$(if $(filter yes, $(DEBUG)),testmain.c,main.c)
endif
SRC	+=	$(SRCDIR)/put_funcs.c		\
		$(SRCDIR)/x_funcs.c		

OBJ	=	$(SRC:.c=.o)

CFLAGS	:=	$(if $(filter yes, $(DEBUG)),-ggdb3,-O2)
CFLAGS	+=	-W -Wall -Wextra -pedantic -ansi -I./include
LDFLAGS	=

all:		$(SRC) $(NAME)

$(NAME):	$(OBJ)
	$(CC) $^ $(LDFLAGS) -o $@

%.o:		%.c
	$(CC) -c $< $(CFLAGS) -o $@

clean:
	$(RM) $(OBJ)

fclean:		clean
	$(RM) $(NAME)

re:		fclean all

.PHONY:		all clean fclean re
